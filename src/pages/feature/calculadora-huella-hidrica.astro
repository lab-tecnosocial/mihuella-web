---
import "./styles.css";
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <title>Calculadora de Huella Hídrica</title>
  </head>
  <body>
    <div class="water-calculator">
      <!-- Paso 0: Introducción -->
      <div id="step0">
        <h1>¡Calcula tu Huella Hídrica!</h1>
        <img
          src="/public/img/huella-hidrica-icon.png"
          alt="gota de agua-calculadora dehuella hidrica"
          class="centered-image"
        />

        <p>
          <b>Cada acción diaria,</b> desde beber un vaso de agua hasta elegir qué
          comer, <b>necesita agua.</b> Pero no siempre vemos cuánta.
        </p>
        <p>
          La huella hídrica es un indicador que mide la cantidad de agua que
          usas de forma directa e indirecta, ayudándote a entender mejor tu
          impacto y a encontrar maneras sencillas de reducirlo.
        </p>
        <p>
          <b
            >Esta huella hídrica se basa en 4 categorías: higiene, limpieza,
            bienes, alimentos y bebidas, repartidas en 22 preguntas
          </b>
        </p>

        <button id="nextToStep1" class="next-btn">Comienza a calcular</button>
        <div class="nav-arrows">
          <button class="nav-arrow prev" onclick="goToPrevStep()">‹</button>
          <button class="nav-arrow next" onclick="goToNextStep()">›</button>
        </div>
      </div>

      <!-- Pregunta 1: Origen-->
      <div id="step1" style="display: none;">
        <h2>Origen</h2>
        <img
          src="/public/img/huella-hidrica-origen.png"
          alt="gota de agua-calculadora dehuella hidrica"
          class="centered-image"
        />

        <h3>¿Cuál es la fuente de agua potable en tu hogar?</h3>
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="checkbox" id="redAgua" />
            <label for="redAgua">Red de agua (SEMAPA, EPSAS, SAGUAPAC)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cooperativas" />
            <label for="cooperativas">Cooperativas</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="ventasBloque" />
            <label for="ventasBloque">Ventas en bloque</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cisternas" />
            <label for="cisternas">Cisternas</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="pozos" />
            <label for="pozos">Pozos (Gobierno municipal)</label>
          </div>
        </div>

        <h3>¿Cuántas personas viven en su hogar?</h3>
        <div class="input-number">
          <input
            type="number"
            id="numPeople"
            placeholder="Ingresa un número"
            min="1"
            max="20"
          />
        </div>
        <button id="nextToStep2" class="next-btn">Siguiente pregunta</button>
        <div class="nav-arrows">
          <button class="nav-arrow prev" onclick="goToPrevStep()">‹</button>
          <button class="nav-arrow next" onclick="goToNextStep()">›</button>
        </div>
      </div>

      <!-- Pregunta 2: Higiene duchas a la semana -->
      <div id="step2" style="display: none;">
        <h2>Higiene</h2>
        <h3>¿Cuántas veces te duchas a la semana?</h3>
        <img
          src="/public/img/higiene.png"
          alt="duchas a las semana"
          class="centered-image"
        />

        <div id="shower-frequency" class="input-number">
          <input
            type="number"
            id="showerFrequencyInput"
            placeholder="Ingresa un número"
            min="1"
            max="20"
          />
        </div>
        <button id="nextToStep3" class="next-btn">Siguiente pregunta</button>
      </div>

      <!-- Pregunta 3: Higiene tiempo de las duchas -->
      <div id="step3" style="display: none;">
        <h3>¿De cuánto tiempo son tus duchas?</h3>
        <!-- Botones de opción -->
        <div id="showerDuration" class="options-container">
          <button class="option-btn" data-value="menos10"
            >Menos de 10 minutos</button
          >
          <button class="option-btn" data-value="10a20">10 a 20 minutos</button>
          <button class="option-btn" data-value="30a60">3 min a 1 hora</button>
        </div>
        <button id="nextToStep4" class="next-btn">Siguiente pregunta</button>
      </div>

      <!-- Pregunta 2: Higiene duchas a la semana -->
      <div id="step4" style="display: none;">
        <h2>Higiene</h2>
        <h3>¿Cuántas veces te duchas a la semana?</h3>
        <img
          src="/public/img/higiene.png"
          alt="duchas a las semana"
          class="centered-image"
        />

        <div id="shower-frequency" class="input-number">
          <input
            type="number"
            id="showerFrequencyInput"
            placeholder="Ingresa un número"
            min="1"
            max="20"
          />
        </div>
        <button id="nextToStep22" class="next-btn">Siguiente pregunta</button>
      </div>

      <!-- Seccion bienes y servicios pregunta 22-->
      <div id="step22" style="display: none;">
        <h2>Bienes y Servicios</h2>

        <img
          src="/public/img/bienes-y-servicios.png"
          alt="bienes y servicios en la huella hidrica"
          class="centered-image"
        />
        <h3>¿Cuántas veces compras ropa o calzado <b> nuevo</b> al año?</h3>

        <div id="purchaseFrequency" class="frequency-options">
          <button class="freq-btn" data-value="1">1 vez al año</button>
          <button class="freq-btn" data-value="6+">Más de 6 veces</button>
          <button class="freq-btn" data-value="2-5">Entre 2 a 5 veces</button>
        </div>

        <!-- Pregunta 23: Cantidad por producto -->
        <h3>¿Cuántos de estos productos compras al año?</h3>
        <div id="productCounters" class="products-container">
          <!-- Tenis -->
          <div class="product-item" data-product="tenis">
            <img src="/public/img/tenis-HH.png" alt="tenis-icon" />
            <p>Tenis</p>
            <div class="counter-controls">
              <button class="counter-btn" data-action="decrement">-</button>
              <span class="counter-value" id="tenisCount">0</span>
              <button class="counter-btn" data-action="increment">+</button>
            </div>
          </div>

          <!-- Camiseta -->
          <div class="product-item" data-product="camiseta">
            <img src="/public/img/camiseta-HH.png" alt="camiseta-icon" />
            <p>Camiseta (algodón)</p>
            <div class="counter-controls">
              <button class="counter-btn" data-action="decrement">-</button>
              <span class="counter-value" id="camisetaCount">0</span>
              <button class="counter-btn" data-action="increment">+</button>
            </div>
          </div>

          <!-- Jeans -->
          <div class="product-item" data-product="jeans">
            <img src="/public/img/jeans-HH.png" alt="camiseta-icon" />
            <p>Jeans</p>
            <div class="counter-controls">
              <button class="counter-btn" data-action="decrement">-</button>
              <span class="counter-value" id="jeansCount">0</span>
              <button class="counter-btn" data-action="increment">+</button>
            </div>
          </div>
        </div>

        <button id="nextToStep23" class="next-btn">Siguiente pregunta</button>
      </div>

      <!-- Seccion bienes y servicios pregunta 24-->
      <div id="step23" style="display: none;">
        <h2>Bienes y servicios</h2>
        <img
          src="/public/img/bienes-y-servicios2.png"
          alt="duchas a las semana"
          class="centered-image"
        />
        <h3>¿Cuántos celulares has tenido durante los últimos 5 años?</h3>
        <!-- Contador -->
        <div class="counter-controls">
          <button class="counter-btn" id="decrementBtn">-</button>
          <span class="counter-value" id="cellphoneCount">0</span>
          <button class="counter-btn" id="incrementBtn">+</button>
        </div>
        <button id="nextToStep24" class="next-btn">Siguiente pregunta</button>
      </div>

      <!-- Seccion bienes y servicios pregunta 22-->
      <div id="step24" style="display: none;">
        <h2>Hábitos Sostenibles</h2>

        <img
          src="/public/img/habitos-sostenibles.png"
          alt="hábitos sostenibles en la huella hidrica"
          class="centered-image"
        />
        <div class="question24">
          <h3>
            ¿Tienes un sistema de recolección de agua de lluvia en tu hogar?
          </h3>
          <div class="optionssusthabit">
            <label><input type="radio" name="rainwater" value="si" /> Sí</label>
            <label><input type="radio" name="rainwater" value="no" /> No</label>
          </div>
          </div>

          <div class="question24">
            <h3>¿Reciclas papel?</h3>
            <div class="optionssusthabit">
              <label
                ><input type="radio" name="recyclePaper" value="si" /> Sí</label
              >
              <label
                ><input type="radio" name="recyclePaper" value="no" /> No</label
              >
            </div>
          </div>
          <div class="question24">
            <h3>¿Cuántos kilos de papel reciclas al año aproximadamente?</h3>
            <input
              type="number"
              placeholder="Ingresa un número (0.5 = 1/2 kg)"
              min="0"
              step="0.5"
            />
          </div>
          <button id="nextToStep25" class="next-btn">Ver resultados</button>
        </div>

  <!--Resultados -->
        <div id="step25" style="display: none;">
          <!-- Fila de resultados -->
          <div class="result-card">
            <!-- Gota de agua -->
            <img
              src="/public/img/huella-hidrica-icon.png"
              alt="Gota de agua"
              class="drop-icon"
            />
            <!-- Texto del resultado -->
            <div class="result-text">
              <p>Tu huella hídrica es:</p>
              <h2>1022 <span>Litros/año</span></h2>
              <p>
                Una persona consume una media de <strong
                  >49640 litros por día</strong
                >.
              </p>
            </div>
            <!-- Comparaciones -->
            <div class="comparisons">
              <div class="comparison">
                <img
                  src="/public/img/botella-icon.png"
                  alt="Botella"
                  class="icon"
                />
                <p>
                  <strong>Tu consumo de agua</strong> en un mes se podría llenar
                  <strong>X botellas de 2 litros</strong>.
                </p>
              </div>
              <div class="comparison">
                <img
                  src="/public/img/camion-icon.png"
                  alt="Camión cisterna"
                  class="icon"
                />
                <p>
                  En un año, tu huella hídrica equivale al agua contenida en <strong
                    >X camiones cisterna</strong
                  >.
                </p>
              </div>
            </div>
          </div>
          <button id="nextToStep26" class="next-btn">¿Cómo ahorrar?</button>
        </div>


  <!-- Consejos-->
        <div id="step26" style="display: none;">
          <h2>Consejos para ahorrar agua</h2>
          <h3>¡Mejora tu HUELLA HÍDRICA!</h3>

          <!-- Botones -->
          <div class="buttons-container">
            <button class="category-btn" data-category="higiene">Higiene</button
            >
            <button class="category-btn" data-category="limpieza"
              >Limpieza</button
            >
            <button class="category-btn" data-category="alimentos"
              >Alimentos y bebidas</button
            >
            <button class="category-btn" data-category="bienes"
              >Bienes y servicios</button
            >
          </div>

          <!-- Botón Volver a calcular -->
          <button class="back-button">Volver a calcular</button>

          <!-- Modal flotante -->
          <div id="modal" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2 id="modal-title">Consejos Higiene</h2>
              <div id="modal-body">
                <ol>
                  <li>
                    Dúchate el menor tiempo posible y apaga el agua al
                    enjabonarte.
                  </li>
                  <li>Repara grifos o fugas en casa.</li>
                  <li>Cierra el grifo al cepillarte los dientes.</li>
                </ol>
              </div>
            </div>
          </div>
        </div>

        <footer class="footer">
          <div class="footer-links">
            <a href="#">¿Cómo calculamos?</a>
            <a href="#">Sobre nosotros</a>
            <a href="#">¿Ya Conoces tu huella de Carbono?</a>
          </div>
          <p>© 2025 Calculadora de Huella Hídrica</p>
        </footer>
      </div>
    </div>

    <script>
      function goToStep(step) {
        const steps = [
          "step0",
          "step1",
          "step2",
          "step3",
          "step4",
          "step22",
          "step23",
          "step24",
          "step25",
        ];
        steps.forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.style.display = "none";
        });
        const target = document.getElementById("step" + step);
        if (target) target.style.display = "block";
      }

      let totalConsumption = 0;
      let selectedDuration = "";
      let numPeople = 1;

      // Step 0 to 1
      document
        .getElementById("nextToStep1")!
        .addEventListener("click", function () {
          document.getElementById("step0")!.style.display = "none";
          document.getElementById("step1")!.style.display = "block";
        });

      // Step 1 to 2
      const nextToStep2Btn = document.getElementById("nextToStep2")!;
      nextToStep2Btn.addEventListener("click", function () {
        numPeople =
          parseInt(
            (document.getElementById("numPeople") as HTMLInputElement).value,
          ) || 1;
        document.getElementById("step1")!.style.display = "none";
        document.getElementById("step2")!.style.display = "block";
      });

      // Step 2 to 3
      const nextToStep3Btn = document.getElementById("nextToStep3")!;
      nextToStep3Btn.addEventListener("click", function () {
        document.getElementById("step2")!.style.display = "none";
        document.getElementById("step3")!.style.display = "block";
      });

      // For step 3 buttons
      const optionBtns = document.querySelectorAll(".option-btn");
      optionBtns.forEach((btn) => {
        btn.addEventListener("click", (e) => {
          selectedDuration = (e.target as HTMLElement).dataset.value || "";
          // Optional: highlight selected
          optionBtns.forEach((b) => b.classList.remove("selected"));
          (e.target as HTMLElement).classList.add("selected");
        });
      });

      // Step 3 al 4
      const nextToStep4Btn = document.getElementById("nextToStep4")!;
      nextToStep4Btn.addEventListener("click", function () {
        document.getElementById("step3")!.style.display = "none";
        document.getElementById("step4")!.style.display = "block";
      });

      // Step 4 al 22
      const nextToStepBtn22 = document.getElementById("nextToStep22")!;
      nextToStepBtn22.addEventListener("click", function () {
        document.getElementById("step4")!.style.display = "none";
        document.getElementById("step22")!.style.display = "block";
      });

      //pregunta 22 - 23
      const nextToStepBtn23 = document.getElementById("nextToStep23")!;
      nextToStepBtn23.addEventListener("click", function () {
        document.getElementById("step22")!.style.display = "none";
        document.getElementById("step23")!.style.display = "block";
      });

      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".counter-btn").forEach((button) => {
          button.addEventListener("click", function () {
            const action = this.getAttribute("data-action");
            const productItem = this.closest(".product-item");
            if (!productItem) return;

            const product = productItem.getAttribute("data-product");
            const countElement = document.getElementById(`${product}Count`);
            if (!countElement) return;

            let count = parseInt(countElement.textContent, 10) || 0;

            if (action === "increment") {
              count++;
            } else if (action === "decrement" && count > 0) {
              count--;
            }

            countElement.textContent = count.toString();
          });
        });
      });

      // boton de mas y menos de pregunta 23
      let cellphoneCount = 0;
      const display = document.getElementById(
        "cellphoneCount",
      ) as HTMLSpanElement;

      if (!display) {
        console.error("Display element not found");
      } else {
        const decrementBtn = document.getElementById(
          "decrementBtn",
        ) as HTMLButtonElement;
        const incrementBtn = document.getElementById(
          "incrementBtn",
        ) as HTMLButtonElement;

        if (decrementBtn) {
          decrementBtn.addEventListener("click", () => {
            if (cellphoneCount > 0)
              display.textContent = (--cellphoneCount).toString();
          });
        }

        if (incrementBtn) {
          incrementBtn.addEventListener("click", () => {
            display.textContent = (++cellphoneCount).toString();
          });
        }
      }

//pregunta 23 - 24
      const nextToStepBtn24 = document.getElementById("nextToStep24")!;
      nextToStepBtn24.addEventListener("click", function () {
        document.getElementById("step23")!.style.display = "none";
        document.getElementById("step24")!.style.display = "block";
      });

//step 24 - 25 Resultados
      const nextToStepBtn25 = document.getElementById("nextToStep25")!;
      nextToStepBtn25.addEventListener("click", function () {
        document.getElementById("step24")!.style.display = "none";
        document.getElementById("step25")!.style.display = "block";
      });
//step 24 - 25 Resultados
      const nextToStepBtn26 = document.getElementById("nextToStep26")!;
      nextToStepBtn26.addEventListener("click", function () {
        document.getElementById("step25")!.style.display = "none";
        document.getElementById("step26")!.style.display = "block";
      });

    </script>
  </body>
</html>
